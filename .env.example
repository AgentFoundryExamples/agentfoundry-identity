# ============================================================
# Agent Foundry Identity Service - Environment Configuration
# ============================================================
# Copy this file to .env and fill in the required values.
# Required variables are marked with [REQUIRED].
# Optional variables have default values shown.

# ============================================================
# ENVIRONMENT MODE
# ============================================================

# Environment mode controls which backends are used.
# Options: dev, prod
# Default: dev
#
# 'dev' mode:
#   - Uses in-memory stub implementations
#   - No external dependencies required (Postgres, Redis)
#   - Suitable for local development and testing
#
# 'prod' mode:
#   - Requires Postgres and Redis configuration below
#   - Uses real backend implementations
#   - Suitable for production deployments
IDENTITY_ENVIRONMENT=dev

# ============================================================
# REQUIRED SECRETS
# ============================================================

# [REQUIRED] Secret key for signing JWT tokens.
# Must be at least 32 characters long.
# Generate with: openssl rand -base64 32
IDENTITY_JWT_SECRET=your-secret-key-at-least-32-characters-long

# [REQUIRED] GitHub OAuth App client ID.
# Create an OAuth App at https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id

# [REQUIRED] GitHub OAuth App client secret.
# From your GitHub OAuth App settings.
GITHUB_CLIENT_SECRET=your-github-client-secret

# ============================================================
# POSTGRES CONFIGURATION (Required in prod mode)
# ============================================================

# Postgres host address.
# Required in prod mode unless using GOOGLE_CLOUD_SQL_INSTANCE.
# POSTGRES_HOST=localhost

# Postgres port number.
# Default: 5432
# POSTGRES_PORT=5432

# Postgres database name.
# Required in prod mode when POSTGRES_HOST is set.
# POSTGRES_DB=identity_service

# Postgres username.
# Required in prod mode when POSTGRES_HOST is set.
# POSTGRES_USER=identity_user

# Postgres password.
# Required in prod mode when POSTGRES_HOST is set.
# [SENSITIVE] Never commit actual passwords to version control.
# POSTGRES_PASSWORD=your-postgres-password

# Google Cloud SQL instance connection name.
# Format: project:region:instance
# Alternative to POSTGRES_HOST for Cloud Run deployments.
# When set, the service uses Cloud SQL Auth Proxy.
# GOOGLE_CLOUD_SQL_INSTANCE=my-project:us-central1:my-instance

# ============================================================
# REDIS CONFIGURATION (Required in prod mode)
# ============================================================

# Redis host address.
# Required in prod mode.
# REDIS_HOST=localhost

# Redis port number.
# Default: 6379
# REDIS_PORT=6379

# Redis database number.
# Default: 0
# Range: 0 to 15
# REDIS_DB=0

# Enable TLS for Redis connections.
# Default: false
# Set to true when using Redis with TLS (e.g., Cloud Memorystore).
# REDIS_TLS_ENABLED=false

# ============================================================
# OAUTH CONFIGURATION
# ============================================================

# Comma-separated list of GitHub OAuth scopes to request.
# Default: read:user,user:email
# See: https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps
OAUTH_SCOPES=read:user,user:email

# ============================================================
# JWT AND SESSION CONFIGURATION
# ============================================================

# JWT token expiry time in seconds.
# Default: 3600 (1 hour)
# Range: 60 to 86400 seconds
JWT_EXPIRY_SECONDS=3600

# Session expiry time in seconds.
# Default: 86400 (24 hours)
# Range: 300 to 604800 seconds (5 minutes to 7 days)
SESSION_EXPIRY_SECONDS=86400

# ============================================================
# ADMIN CONFIGURATION
# ============================================================

# Comma-separated list of GitHub user IDs with admin access.
# Leave empty for no admin users.
# Find your GitHub ID at: https://api.github.com/users/YOUR_USERNAME
ADMIN_GITHUB_IDS=

# Enable admin debugging endpoints (session listing).
# Default: false
# Set to true to enable /v1/admin/* endpoints.
# SECURITY: Only enable in trusted environments.
ADMIN_TOOLS_ENABLED=false

# ============================================================
# LOGGING CONFIGURATION
# ============================================================

# Logging level for the service.
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO
LOG_LEVEL=INFO

# Log output format.
# Options: json, console
# Default: json (recommended for production)
# Use 'console' for local development for colored output.
LOG_FORMAT=json

# ============================================================
# SERVICE CONFIGURATION
# ============================================================

# Host to bind the service to.
# Default: 0.0.0.0 (all interfaces)
# For local development, you might use 127.0.0.1
SERVICE_HOST=0.0.0.0

# Port to bind the service to.
# Default: 8080 (Cloud Run default)
# Range: 1 to 65535
SERVICE_PORT=8080
