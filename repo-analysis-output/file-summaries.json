{
  "schema_version": "2.0",
  "total_files": 45,
  "files": [
    {
      "schema_version": "2.0",
      "path": "af_identity_service/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1166,
        "loc": 6,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/app.py",
      "language": "Python",
      "role": "entry-point",
      "role_justification": "common entry point name 'app'",
      "metrics": {
        "size_bytes": 11957,
        "loc": 245,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "class RequestIDMiddleware",
          "function create_health_router",
          "function create_app",
          "function main"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "typing.Any",
            "uuid"
          ],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.FastAPI",
            "fastapi.responses.JSONResponse",
            "uvicorn"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/config.py",
      "language": "Python",
      "role": "configuration",
      "role_justification": "configuration file name 'config'",
      "metrics": {
        "size_bytes": 12902,
        "loc": 279,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "class Settings",
          "class ConfigurationError",
          "function validate_prod_settings",
          "function get_settings"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "functools.lru_cache",
            "typing.Literal"
          ],
          "third-party": [
            "pydantic.Field",
            "pydantic.SecretStr",
            "pydantic.field_validator",
            "pydantic_settings.BaseSettings",
            "pydantic_settings.SettingsConfigDict"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/dependencies.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 22416,
        "loc": 467,
        "todo_count": 0,
        "declaration_count": 7
      },
      "structure": {
        "declarations": [
          "class SessionStore",
          "class InMemorySessionStore",
          "class GitHubDriver",
          "class PlaceholderGitHubDriver",
          "class DependencyContainer",
          "function get_dependencies",
          "function reset_dependencies"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "typing.Any",
            "typing.TYPE_CHECKING"
          ],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/github/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1190,
        "loc": 8,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/github/driver.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 7535,
        "loc": 151,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class GitHubOAuthDriverError",
          "class GitHubOAuthDriver",
          "class StubGitHubOAuthDriver"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/logging.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 5948,
        "loc": 104,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "function add_service_context",
          "function add_request_context",
          "function configure_logging",
          "function get_logger"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "contextvars.ContextVar",
            "logging",
            "sys",
            "typing.Any"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/migrations/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 10323,
        "loc": 223,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "function get_connection_string",
          "function run_migrate",
          "function run_verify",
          "function run_status",
          "function main"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "argparse",
            "os",
            "sys"
          ],
          "third-party": [
            "sqlalchemy.URL",
            "sqlalchemy.create_engine",
            "sqlalchemy.text",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/migrations/__main__.py",
      "language": "Python",
      "role": "entry-point",
      "role_justification": "common entry point name '__main__'",
      "metrics": {
        "size_bytes": 1134,
        "loc": 7,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "sys"
          ],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/migrations/user_schema.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6752,
        "loc": 128,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "function create_af_users_table",
          "function verify_af_users_schema"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "sqlalchemy.BigInteger",
            "sqlalchemy.Column",
            "sqlalchemy.DateTime",
            "sqlalchemy.Index",
            "sqlalchemy.String",
            "sqlalchemy.Table",
            "sqlalchemy.dialects.postgresql.UUID",
            "sqlalchemy.engine.Engine",
            "sqlalchemy.schema.MetaData",
            "sqlalchemy.text",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/models/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1520,
        "loc": 16,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/models/github.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 3719,
        "loc": 66,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class GitHubIdentity",
          "class GitHubOAuthResult"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "dataclasses.dataclass",
            "datetime.datetime",
            "datetime.timezone"
          ],
          "third-party": [
            "pydantic.BaseModel",
            "pydantic.Field"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/models/session.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 4558,
        "loc": 84,
        "todo_count": 0,
        "declaration_count": 1
      },
      "structure": {
        "declarations": [
          "class Session"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timezone",
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "pydantic.BaseModel",
            "pydantic.Field",
            "pydantic.field_validator"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/models/token.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 3309,
        "loc": 57,
        "todo_count": 0,
        "declaration_count": 1
      },
      "structure": {
        "declarations": [
          "class AFTokenIntrospection"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timezone",
            "uuid.UUID"
          ],
          "third-party": [
            "pydantic.BaseModel",
            "pydantic.Field",
            "pydantic.field_validator"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/models/user.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 2975,
        "loc": 49,
        "todo_count": 0,
        "declaration_count": 1
      },
      "structure": {
        "declarations": [
          "class AFUser"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timezone",
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "pydantic.BaseModel",
            "pydantic.Field"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1331,
        "loc": 11,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/admin.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6359,
        "loc": 126,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "class SessionInfo",
          "class UserSessionsResponse",
          "class ErrorResponse",
          "function create_admin_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "uuid.UUID"
          ],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.Depends",
            "fastapi.HTTPException",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/auth_github.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6701,
        "loc": 144,
        "todo_count": 0,
        "declaration_count": 7
      },
      "structure": {
        "declarations": [
          "class StartRequest",
          "class StartResponse",
          "class CallbackRequest",
          "class CallbackUserResponse",
          "class CallbackResponse",
          "class ErrorResponse",
          "function create_auth_github_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.HTTPException",
            "fastapi.responses.JSONResponse",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/github_token.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6515,
        "loc": 142,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "class GitHubTokenRequest",
          "class GitHubTokenResponse",
          "class ErrorResponse",
          "function create_github_token_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.Depends",
            "fastapi.HTTPException",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/me.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 4641,
        "loc": 102,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class MeResponse",
          "class ErrorResponse",
          "function create_me_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.Depends",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/session.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6871,
        "loc": 146,
        "todo_count": 0,
        "declaration_count": 4
      },
      "structure": {
        "declarations": [
          "class RevokeSessionRequest",
          "class RevokeSessionResponse",
          "class ErrorResponse",
          "function create_session_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.HTTPException",
            "fastapi.Header",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/routes/token.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 5036,
        "loc": 97,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class ErrorResponse",
          "function create_token_router"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "fastapi.APIRouter",
            "fastapi.HTTPException",
            "fastapi.Header",
            "pydantic.BaseModel",
            "pydantic.Field",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/security/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 2058,
        "loc": 44,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/security/auth.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 13754,
        "loc": 311,
        "todo_count": 0,
        "declaration_count": 10
      },
      "structure": {
        "declarations": [
          "class AuthenticationError",
          "class InvalidTokenError",
          "class SessionNotFoundError",
          "class MissingAuthorizationError",
          "class SessionOwnershipError",
          "class AuthenticatedContext",
          "function parse_authorization_header",
          "async function authenticate_request",
          "async function revoke_session",
          "function create_auth_dependency"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "dataclasses.dataclass",
            "datetime.datetime",
            "datetime.timezone",
            "typing.Annotated",
            "typing.Callable",
            "typing.TYPE_CHECKING",
            "uuid.UUID"
          ],
          "third-party": [
            "fastapi.Depends",
            "fastapi.HTTPException",
            "fastapi.Header",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/security/jwt.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 9113,
        "loc": 209,
        "todo_count": 0,
        "declaration_count": 9
      },
      "structure": {
        "declarations": [
          "class JWTMintError",
          "class JWTValidationError",
          "class JWTExpiredError",
          "function _base64url_decode",
          "function _base64url_encode",
          "function _create_signature",
          "function mint_af_jwt",
          "class JWTClaims",
          "function validate_af_jwt"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "base64",
            "datetime.datetime",
            "datetime.timezone",
            "hmac",
            "json",
            "uuid.UUID"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/services/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1258,
        "loc": 15,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/services/github_tokens.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 6632,
        "loc": 134,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "class GitHubTokenServiceError",
          "class RefreshTokenMissingError",
          "class TokenRefreshError",
          "class GitHubAccessTokenResult",
          "class GitHubTokenService"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "dataclasses.dataclass",
            "datetime.datetime",
            "uuid.UUID"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/services/oauth.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 12093,
        "loc": 256,
        "todo_count": 0,
        "declaration_count": 9
      },
      "structure": {
        "declarations": [
          "class OAuthServiceError",
          "class InvalidStateError",
          "class GitHubDriverError",
          "class StateStore",
          "class _StateEntry",
          "class InMemoryStateStore",
          "class OAuthStartResult",
          "class OAuthCallbackResult",
          "class OAuthService"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "dataclasses.dataclass",
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "secrets",
            "threading",
            "urllib.parse.urlencode"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/stores/__init__.py",
      "language": "Python",
      "role": "module-init",
      "role_justification": "module initialization file '__init__'",
      "metrics": {
        "size_bytes": 1515,
        "loc": 18,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/stores/github_token_store.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 12683,
        "loc": 260,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "class GitHubTokenStoreError",
          "class RefreshTokenNotFoundError",
          "class GitHubTokenStore",
          "class _StoredTokens",
          "class InMemoryGitHubTokenStore"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "threading",
            "uuid.UUID"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/stores/postgres_user_repository.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 11056,
        "loc": 208,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class DuplicateGitHubUserError",
          "class DatabaseConnectionError",
          "class PostgresUserRepository"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timezone",
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "sqlalchemy.dialects.postgresql.insert",
            "sqlalchemy.engine.Engine",
            "sqlalchemy.exc.IntegrityError",
            "sqlalchemy.exc.OperationalError",
            "sqlalchemy.select",
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/stores/session_store.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 8257,
        "loc": 184,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class SessionStore",
          "class InMemorySessionStore"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "datetime.datetime",
            "datetime.timezone",
            "threading",
            "uuid.UUID"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/stores/user_store.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 7182,
        "loc": 150,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class AFUserRepository",
          "class InMemoryUserRepository"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "abc.ABC",
            "abc.abstractmethod",
            "datetime.datetime",
            "datetime.timezone",
            "threading",
            "uuid.UUID"
          ],
          "third-party": [
            "structlog"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "af_identity_service/version.py",
      "language": "Python",
      "role": "implementation",
      "role_justification": "general implementation file (default classification)",
      "metrics": {
        "size_bytes": 1503,
        "loc": 17,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/__init__.py",
      "language": "Python",
      "role": "test",
      "role_justification": "located in 'tests' directory",
      "metrics": {
        "size_bytes": 955,
        "loc": 1,
        "todo_count": 0
      },
      "structure": {
        "declarations": []
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": []
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_app.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 5450,
        "loc": 95,
        "todo_count": 0,
        "declaration_count": 6
      },
      "structure": {
        "declarations": [
          "function valid_settings",
          "function client",
          "class TestHealthEndpoint",
          "class TestRequestIDMiddleware",
          "class TestAppFactory",
          "class TestAPIDocumentation"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "uuid"
          ],
          "third-party": [
            "fastapi.FastAPI",
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_auth_github_routes.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 23848,
        "loc": 505,
        "todo_count": 0,
        "declaration_count": 17
      },
      "structure": {
        "declarations": [
          "function valid_settings",
          "function stub_github_driver",
          "function user_repository",
          "function session_store",
          "function token_store",
          "function state_store",
          "function oauth_service",
          "function test_client",
          "class TestMintAfJwt",
          "class TestInMemoryStateStore",
          "class TestOAuthServiceStart",
          "class TestOAuthServiceCallback",
          "class TestOAuthServiceDriverErrors",
          "class TestOAuthServiceRefreshTokenOptional",
          "class TestAuthGitHubRoutes",
          "class TestAuthGitHubRoutesDriverErrors",
          "class TestAppIntegration"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "unittest.mock.AsyncMock",
            "uuid.uuid4"
          ],
          "third-party": [
            "fastapi.FastAPI",
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_config.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 21967,
        "loc": 441,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class TestSettings",
          "class TestValidateProdSettings",
          "class TestGetSettings"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "unittest.mock"
          ],
          "third-party": [
            "pydantic.SecretStr",
            "pydantic.ValidationError",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_dependencies.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 9958,
        "loc": 196,
        "todo_count": 0,
        "declaration_count": 6
      },
      "structure": {
        "declarations": [
          "function valid_settings",
          "class TestInMemorySessionStore",
          "class TestPlaceholderGitHubDriver",
          "class TestDependencyContainer",
          "class TestGetDependencies",
          "class TestDependencyContainerEnvironment"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [],
          "third-party": [
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_github_driver.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 3856,
        "loc": 57,
        "todo_count": 0,
        "declaration_count": 1
      },
      "structure": {
        "declarations": [
          "class TestStubGitHubOAuthDriver"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timezone"
          ],
          "third-party": [
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_github_token_route.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 28218,
        "loc": 570,
        "todo_count": 0,
        "declaration_count": 10
      },
      "structure": {
        "declarations": [
          "function valid_settings",
          "function session_store",
          "function user_repository",
          "function token_store",
          "function jwt_secret",
          "class TestGitHubTokenService",
          "class TestGitHubTokenRoute",
          "class TestAppIntegration",
          "class TestMeRoute",
          "class TestAdminRoute"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "unittest.mock.AsyncMock"
          ],
          "third-party": [
            "fastapi.FastAPI",
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_models.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 11009,
        "loc": 214,
        "todo_count": 0,
        "declaration_count": 5
      },
      "structure": {
        "declarations": [
          "class TestAFUser",
          "class TestGitHubIdentity",
          "class TestGitHubOAuthResult",
          "class TestSession",
          "class TestAFTokenIntrospection"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "dataclasses.is_dataclass",
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "uuid.UUID",
            "uuid.uuid4"
          ],
          "third-party": [
            "pydantic.ValidationError",
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_postgres_user_repository.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 7746,
        "loc": 145,
        "todo_count": 0,
        "declaration_count": 2
      },
      "structure": {
        "declarations": [
          "class TestPostgresUserRepository",
          "class TestPostgresUserRepositoryIntegration"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.timedelta",
            "os",
            "urllib.parse.quote_plus",
            "uuid.uuid4"
          ],
          "third-party": [
            "pytest",
            "sqlalchemy.create_engine",
            "sqlalchemy.text"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_stores.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 16355,
        "loc": 358,
        "todo_count": 0,
        "declaration_count": 3
      },
      "structure": {
        "declarations": [
          "class TestInMemoryUserRepository",
          "class TestInMemorySessionStore",
          "class TestInMemoryGitHubTokenStore"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "uuid.uuid4"
          ],
          "third-party": [
            "pytest"
          ]
        }
      }
    },
    {
      "schema_version": "2.0",
      "path": "tests/test_token_and_session_routes.py",
      "language": "Python",
      "role": "test",
      "role_justification": "filename starts with 'test_'",
      "metrics": {
        "size_bytes": 29140,
        "loc": 636,
        "todo_count": 0,
        "declaration_count": 8
      },
      "structure": {
        "declarations": [
          "function valid_settings",
          "function session_store",
          "function user_repository",
          "function jwt_secret",
          "class TestJWTValidation",
          "class TestTokenIntrospectionRoute",
          "class TestSessionRevocationRoute",
          "class TestAppIntegrationWithNewRoutes"
        ]
      },
      "dependencies": {
        "imports": [],
        "exports": [],
        "external": {
          "stdlib": [
            "datetime.datetime",
            "datetime.timedelta",
            "datetime.timezone",
            "uuid.uuid4"
          ],
          "third-party": [
            "fastapi.FastAPI",
            "fastapi.testclient.TestClient",
            "pytest"
          ]
        }
      }
    }
  ]
}